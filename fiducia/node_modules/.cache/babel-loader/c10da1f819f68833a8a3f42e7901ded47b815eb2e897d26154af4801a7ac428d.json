{"ast":null,"code":"/*\r\nThis file is part of web3.js.\r\n\r\nweb3.js is free software: you can redistribute it and/or modify\r\nit under the terms of the GNU Lesser General Public License as published by\r\nthe Free Software Foundation, either version 3 of the License, or\r\n(at your option) any later version.\r\n\r\nweb3.js is distributed in the hope that it will be useful,\r\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\r\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\nGNU Lesser General Public License for more details.\r\n\r\nYou should have received a copy of the GNU Lesser General Public License\r\nalong with web3.js.  If not, see <http://www.gnu.org/licenses/>.\r\n*/\nimport { decodeParameter, decodeParametersWith } from './parameters_api.js';\nconst STATIC_TYPES = ['bool', 'string', 'int', 'uint', 'address', 'fixed', 'ufixed'];\nconst _decodeParameter = (inputType, clonedTopic) => inputType === 'string' ? clonedTopic : decodeParameter(inputType, clonedTopic);\n/**\r\n * Decodes ABI-encoded log data and indexed topic data.\r\n * @param inputs - A {@link AbiParameter} input array. See the [Solidity documentation](https://docs.soliditylang.org/en/develop/types.html) for a list of types.\r\n * @param data - The ABI byte code in the `data` field of a log.\r\n * @param topics - An array with the index parameter topics of the log, without the topic[0] if its a non-anonymous event, otherwise with topic[0]\r\n * @returns - The result object containing the decoded parameters.\r\n *\r\n * @example\r\n * ```ts\r\n * let res = web3.eth.abi.decodeLog(\r\n *    [\r\n *      {\r\n *        type: \"string\",\r\n *        name: \"myString\",\r\n *      },\r\n *      {\r\n *        type: \"uint256\",\r\n *        name: \"myNumber\",\r\n *        indexed: true,\r\n *      },\r\n *      {\r\n *        type: \"uint8\",\r\n *        name: \"mySmallNumber\",\r\n *        indexed: true,\r\n *      },\r\n *    ],\r\n *    \"0x0000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000748656c6c6f252100000000000000000000000000000000000000000000000000\",\r\n *    [\r\n *      \"0x000000000000000000000000000000000000000000000000000000000000f310\",\r\n *      \"0x0000000000000000000000000000000000000000000000000000000000000010\",\r\n *    ]\r\n *  );\r\n * > {\r\n *  '0': 'Hello%!',\r\n *  '1': 62224n,\r\n *  '2': 16n,\r\n *  __length__: 3,\r\n *  myString: 'Hello%!',\r\n *  myNumber: 62224n,\r\n *  mySmallNumber: 16n\r\n * }\r\n * ```\r\n */\nexport const decodeLog = (inputs, data, topics) => {\n  const clonedTopics = Array.isArray(topics) ? topics : [topics];\n  const indexedInputs = {};\n  const nonIndexedInputs = {};\n  for (const [i, input] of inputs.entries()) {\n    if (input.indexed) {\n      indexedInputs[i] = input;\n    } else {\n      nonIndexedInputs[i] = input;\n    }\n  }\n  const decodedNonIndexedInputs = data ? decodeParametersWith(Object.values(nonIndexedInputs), data, true) : {\n    __length__: 0\n  };\n  // If topics are more than indexed inputs, that means first topic is the event signature\n  const offset = clonedTopics.length - Object.keys(indexedInputs).length;\n  const decodedIndexedInputs = Object.values(indexedInputs).map((input, index) => STATIC_TYPES.some(s => input.type.startsWith(s)) ? _decodeParameter(input.type, clonedTopics[index + offset]) : clonedTopics[index + offset]);\n  const returnValues = {\n    __length__: 0\n  };\n  let indexedCounter = 0;\n  let nonIndexedCounter = 0;\n  for (const [i, res] of inputs.entries()) {\n    returnValues[i] = res.type === 'string' ? '' : undefined;\n    if (indexedInputs[i]) {\n      returnValues[i] = decodedIndexedInputs[indexedCounter];\n      indexedCounter += 1;\n    }\n    if (nonIndexedInputs[i]) {\n      returnValues[i] = decodedNonIndexedInputs[String(nonIndexedCounter)];\n      nonIndexedCounter += 1;\n    }\n    if (res.name) {\n      returnValues[res.name] = returnValues[i];\n    }\n    returnValues.__length__ += 1;\n  }\n  return returnValues;\n};","map":{"version":3,"names":["decodeParameter","decodeParametersWith","STATIC_TYPES","_decodeParameter","inputType","clonedTopic","decodeLog","inputs","data","topics","clonedTopics","Array","isArray","indexedInputs","nonIndexedInputs","i","input","entries","indexed","decodedNonIndexedInputs","Object","values","__length__","offset","length","keys","decodedIndexedInputs","map","index","some","s","type","startsWith","returnValues","indexedCounter","nonIndexedCounter","res","undefined","String","name"],"sources":["C:\\Users\\lakka\\OneDrive - Manipal Academy of Higher Education\\FIDUCIA\\voting-gui\\fiducia\\node_modules\\web3-eth-abi\\src\\api\\logs_api.ts"],"sourcesContent":["ï»¿/*\r\nThis file is part of web3.js.\r\n\r\nweb3.js is free software: you can redistribute it and/or modify\r\nit under the terms of the GNU Lesser General Public License as published by\r\nthe Free Software Foundation, either version 3 of the License, or\r\n(at your option) any later version.\r\n\r\nweb3.js is distributed in the hope that it will be useful,\r\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\r\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\nGNU Lesser General Public License for more details.\r\n\r\nYou should have received a copy of the GNU Lesser General Public License\r\nalong with web3.js.  If not, see <http://www.gnu.org/licenses/>.\r\n*/\r\n\r\nimport { HexString, AbiParameter, DecodedParams } from 'web3-types';\r\nimport { decodeParameter, decodeParametersWith } from './parameters_api.js';\r\n\r\nconst STATIC_TYPES = ['bool', 'string', 'int', 'uint', 'address', 'fixed', 'ufixed'];\r\n\r\nconst _decodeParameter = (inputType: string, clonedTopic: string) =>\r\n\tinputType === 'string' ? clonedTopic : decodeParameter(inputType, clonedTopic);\r\n\r\n/**\r\n * Decodes ABI-encoded log data and indexed topic data.\r\n * @param inputs - A {@link AbiParameter} input array. See the [Solidity documentation](https://docs.soliditylang.org/en/develop/types.html) for a list of types.\r\n * @param data - The ABI byte code in the `data` field of a log.\r\n * @param topics - An array with the index parameter topics of the log, without the topic[0] if its a non-anonymous event, otherwise with topic[0]\r\n * @returns - The result object containing the decoded parameters.\r\n *\r\n * @example\r\n * ```ts\r\n * let res = web3.eth.abi.decodeLog(\r\n *    [\r\n *      {\r\n *        type: \"string\",\r\n *        name: \"myString\",\r\n *      },\r\n *      {\r\n *        type: \"uint256\",\r\n *        name: \"myNumber\",\r\n *        indexed: true,\r\n *      },\r\n *      {\r\n *        type: \"uint8\",\r\n *        name: \"mySmallNumber\",\r\n *        indexed: true,\r\n *      },\r\n *    ],\r\n *    \"0x0000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000748656c6c6f252100000000000000000000000000000000000000000000000000\",\r\n *    [\r\n *      \"0x000000000000000000000000000000000000000000000000000000000000f310\",\r\n *      \"0x0000000000000000000000000000000000000000000000000000000000000010\",\r\n *    ]\r\n *  );\r\n * > {\r\n *  '0': 'Hello%!',\r\n *  '1': 62224n,\r\n *  '2': 16n,\r\n *  __length__: 3,\r\n *  myString: 'Hello%!',\r\n *  myNumber: 62224n,\r\n *  mySmallNumber: 16n\r\n * }\r\n * ```\r\n */\r\nexport const decodeLog = <ReturnType extends DecodedParams>(\r\n\tinputs: Array<AbiParameter>,\r\n\tdata: HexString,\r\n\ttopics: string | string[],\r\n) => {\r\n\tconst clonedTopics = Array.isArray(topics) ? topics : [topics];\r\n\r\n\tconst indexedInputs: Record<number, AbiParameter> = {};\r\n\tconst nonIndexedInputs: Record<number, AbiParameter> = {};\r\n\r\n\tfor (const [i, input] of inputs.entries()) {\r\n\t\tif (input.indexed) {\r\n\t\t\tindexedInputs[i] = input;\r\n\t\t} else {\r\n\t\t\tnonIndexedInputs[i] = input;\r\n\t\t}\r\n\t}\r\n\r\n\tconst decodedNonIndexedInputs: DecodedParams = data\r\n\t\t? decodeParametersWith(Object.values(nonIndexedInputs), data, true)\r\n\t\t: { __length__: 0 };\r\n\r\n\t// If topics are more than indexed inputs, that means first topic is the event signature\r\n\tconst offset = clonedTopics.length - Object.keys(indexedInputs).length;\r\n\r\n\tconst decodedIndexedInputs = Object.values(indexedInputs).map((input, index) =>\r\n\t\tSTATIC_TYPES.some(s => input.type.startsWith(s))\r\n\t\t\t? _decodeParameter(input.type, clonedTopics[index + offset])\r\n\t\t\t: clonedTopics[index + offset],\r\n\t);\r\n\r\n\tconst returnValues: DecodedParams = { __length__: 0 };\r\n\r\n\tlet indexedCounter = 0;\r\n\tlet nonIndexedCounter = 0;\r\n\r\n\tfor (const [i, res] of inputs.entries()) {\r\n\t\treturnValues[i] = res.type === 'string' ? '' : undefined;\r\n\r\n\t\tif (indexedInputs[i]) {\r\n\t\t\treturnValues[i] = decodedIndexedInputs[indexedCounter];\r\n\t\t\tindexedCounter += 1;\r\n\t\t}\r\n\r\n\t\tif (nonIndexedInputs[i]) {\r\n\t\t\treturnValues[i] = decodedNonIndexedInputs[String(nonIndexedCounter)];\r\n\t\t\tnonIndexedCounter += 1;\r\n\t\t}\r\n\r\n\t\tif (res.name) {\r\n\t\t\treturnValues[res.name] = returnValues[i];\r\n\t\t}\r\n\r\n\t\treturnValues.__length__ += 1;\r\n\t}\r\n\r\n\treturn returnValues as ReturnType;\r\n};\r\n"],"mappings":"AAAA;;;;;;;;;;;;;;;;AAkBA,SAASA,eAAe,EAAEC,oBAAoB,QAAQ,qBAAqB;AAE3E,MAAMC,YAAY,GAAG,CAAC,MAAM,EAAE,QAAQ,EAAE,KAAK,EAAE,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,QAAQ,CAAC;AAEpF,MAAMC,gBAAgB,GAAGA,CAACC,SAAiB,EAAEC,WAAmB,KAC/DD,SAAS,KAAK,QAAQ,GAAGC,WAAW,GAAGL,eAAe,CAACI,SAAS,EAAEC,WAAW,CAAC;AAE/E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2CA,OAAO,MAAMC,SAAS,GAAGA,CACxBC,MAA2B,EAC3BC,IAAe,EACfC,MAAyB,KACtB;EACH,MAAMC,YAAY,GAAGC,KAAK,CAACC,OAAO,CAACH,MAAM,CAAC,GAAGA,MAAM,GAAG,CAACA,MAAM,CAAC;EAE9D,MAAMI,aAAa,GAAiC,EAAE;EACtD,MAAMC,gBAAgB,GAAiC,EAAE;EAEzD,KAAK,MAAM,CAACC,CAAC,EAAEC,KAAK,CAAC,IAAIT,MAAM,CAACU,OAAO,EAAE,EAAE;IAC1C,IAAID,KAAK,CAACE,OAAO,EAAE;MAClBL,aAAa,CAACE,CAAC,CAAC,GAAGC,KAAK;KACxB,MAAM;MACNF,gBAAgB,CAACC,CAAC,CAAC,GAAGC,KAAK;;;EAI7B,MAAMG,uBAAuB,GAAkBX,IAAI,GAChDP,oBAAoB,CAACmB,MAAM,CAACC,MAAM,CAACP,gBAAgB,CAAC,EAAEN,IAAI,EAAE,IAAI,CAAC,GACjE;IAAEc,UAAU,EAAE;EAAC,CAAE;EAEpB;EACA,MAAMC,MAAM,GAAGb,YAAY,CAACc,MAAM,GAAGJ,MAAM,CAACK,IAAI,CAACZ,aAAa,CAAC,CAACW,MAAM;EAEtE,MAAME,oBAAoB,GAAGN,MAAM,CAACC,MAAM,CAACR,aAAa,CAAC,CAACc,GAAG,CAAC,CAACX,KAAK,EAAEY,KAAK,KAC1E1B,YAAY,CAAC2B,IAAI,CAACC,CAAC,IAAId,KAAK,CAACe,IAAI,CAACC,UAAU,CAACF,CAAC,CAAC,CAAC,GAC7C3B,gBAAgB,CAACa,KAAK,CAACe,IAAI,EAAErB,YAAY,CAACkB,KAAK,GAAGL,MAAM,CAAC,CAAC,GAC1Db,YAAY,CAACkB,KAAK,GAAGL,MAAM,CAAC,CAC/B;EAED,MAAMU,YAAY,GAAkB;IAAEX,UAAU,EAAE;EAAC,CAAE;EAErD,IAAIY,cAAc,GAAG,CAAC;EACtB,IAAIC,iBAAiB,GAAG,CAAC;EAEzB,KAAK,MAAM,CAACpB,CAAC,EAAEqB,GAAG,CAAC,IAAI7B,MAAM,CAACU,OAAO,EAAE,EAAE;IACxCgB,YAAY,CAAClB,CAAC,CAAC,GAAGqB,GAAG,CAACL,IAAI,KAAK,QAAQ,GAAG,EAAE,GAAGM,SAAS;IAExD,IAAIxB,aAAa,CAACE,CAAC,CAAC,EAAE;MACrBkB,YAAY,CAAClB,CAAC,CAAC,GAAGW,oBAAoB,CAACQ,cAAc,CAAC;MACtDA,cAAc,IAAI,CAAC;;IAGpB,IAAIpB,gBAAgB,CAACC,CAAC,CAAC,EAAE;MACxBkB,YAAY,CAAClB,CAAC,CAAC,GAAGI,uBAAuB,CAACmB,MAAM,CAACH,iBAAiB,CAAC,CAAC;MACpEA,iBAAiB,IAAI,CAAC;;IAGvB,IAAIC,GAAG,CAACG,IAAI,EAAE;MACbN,YAAY,CAACG,GAAG,CAACG,IAAI,CAAC,GAAGN,YAAY,CAAClB,CAAC,CAAC;;IAGzCkB,YAAY,CAACX,UAAU,IAAI,CAAC;;EAG7B,OAAOW,YAA0B;AAClC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}