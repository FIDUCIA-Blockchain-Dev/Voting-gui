{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\lakka\\\\OneDrive - Manipal Academy of Higher Education\\\\FIDUCIA\\\\voting-gui\\\\fiducia\\\\src\\\\components\\\\chairperson\\\\set.js\";\nimport React, { Component } from 'react';\nimport Web3 from 'web3';\nimport { ABI, address } from '../config';\nimport Candidates_input from './candidates_input.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.handle_no_of_voters_Change = event => {\n      this.setState({\n        no_of_voters: event.target.value\n      });\n    };\n    this.handle_reg_time_Change = event => {\n      this.setState({\n        reg_time: event.target.value\n      });\n    };\n    this.handle_vote_time_Change = event => {\n      this.setState({\n        vote_time: event.target.value\n      });\n    };\n    this.handle_reveal_time_Change = event => {\n      this.setState({\n        reveal_time: event.target.value\n      });\n    };\n    this.state = {\n      account: '',\n      no_of_voters: 0,\n      reg_time: '',\n      vote_time: '',\n      reveal_time: '',\n      submit_pressed: 0,\n      error: 0\n    };\n  }\n  componentDidMount() {\n    this.loadBlockchainData();\n  }\n  async loadBlockchainData() {\n    try {\n      // Check if Web3 provider is available from Metamask or similar extension\n      if (window.ethereum) {\n        const web3 = new Web3(window.ethereum);\n        await window.ethereum.enable(); // Request user permission to connect\n        const accounts = await web3.eth.getAccounts();\n        this.setState({\n          account: accounts[0]\n        });\n        const scontract = new web3.eth.Contract(ABI, address);\n        this.setState({\n          scontract\n        });\n      } else {\n        console.log('Please install MetaMask or use a compatible browser extension.');\n      }\n    } catch (error) {\n      console.error('Error loading blockchain data:', error);\n    }\n  }\n  async set() {\n    const {\n      scontract,\n      account,\n      no_of_voters\n    } = this.state;\n    try {\n      await scontract.methods.set(no_of_voters).send({\n        from: account\n      });\n      this.setState({\n        submit_pressed: 1\n      });\n    } catch (error) {\n      this.setState({\n        error: 1\n      });\n    }\n  }\n  render() {\n    const {\n      submit_pressed,\n      error\n    } = this.state;\n    if (submit_pressed === 0) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"SET PAGE\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Your account: \", this.state.account]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"container\",\n          children: [error === 1 && /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"alert alert-danger\",\n              role: \"alert\",\n              children: \"You have rejected the transaction. Please try again\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 30\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"container mb-3 flex\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                class: \"form-label\",\n                children: \"Number of Candidates\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 82,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                class: \"form-control\",\n                id: \"exampleTo\",\n                value: this.state.no_of_voters,\n                onChange: this.handle_no_of_voters_Change\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 83,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              class: \"btn btn-success\",\n              onClick: () => this.set(),\n              children: \"Submit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(Candidates_input, {\n          noOfVoters: this.state.no_of_voters\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 9\n        }, this)\n      }, void 0, false);\n    }\n  }\n}\nexport default App;","map":{"version":3,"names":["React","Component","Web3","ABI","address","Candidates_input","jsxDEV","_jsxDEV","Fragment","_Fragment","App","constructor","props","handle_no_of_voters_Change","event","setState","no_of_voters","target","value","handle_reg_time_Change","reg_time","handle_vote_time_Change","vote_time","handle_reveal_time_Change","reveal_time","state","account","submit_pressed","error","componentDidMount","loadBlockchainData","window","ethereum","web3","enable","accounts","eth","getAccounts","scontract","Contract","console","log","set","methods","send","from","render","children","fileName","_jsxFileName","lineNumber","columnNumber","className","class","role","type","id","onChange","onClick","noOfVoters"],"sources":["C:/Users/lakka/OneDrive - Manipal Academy of Higher Education/FIDUCIA/voting-gui/fiducia/src/components/chairperson/set.js"],"sourcesContent":["import React, { Component } from 'react';\r\nimport Web3 from 'web3';\r\nimport { ABI, address } from '../config';\r\nimport Candidates_input from './candidates_input.js';\r\nclass App extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      account: '',\r\n      no_of_voters: 0,\r\n      reg_time: '',\r\n      vote_time: '',\r\n      reveal_time: '',\r\n      submit_pressed:0,\r\n      error:0,\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.loadBlockchainData();\r\n  }\r\n\r\n  async loadBlockchainData() {\r\n    try {\r\n      // Check if Web3 provider is available from Metamask or similar extension\r\n      if (window.ethereum) {\r\n        const web3 = new Web3(window.ethereum);\r\n        await window.ethereum.enable(); // Request user permission to connect\r\n        const accounts = await web3.eth.getAccounts();\r\n        this.setState({ account: accounts[0] });\r\n        const scontract = new web3.eth.Contract(ABI, address)\r\n        this.setState({ scontract })\r\n      } else {\r\n        console.log('Please install MetaMask or use a compatible browser extension.');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading blockchain data:', error);\r\n    }\r\n  }\r\n  async set() {\r\n    const {scontract,account,no_of_voters} = this.state;\r\n    try\r\n    {\r\n      await scontract.methods.set(no_of_voters).send({from:account});\r\n    this.setState({submit_pressed:1});\r\n    }\r\n    catch(error)\r\n    {\r\n      this.setState({error:1})\r\n    }\r\n    \r\n  }\r\n  handle_no_of_voters_Change = (event) => {\r\n    this.setState({ no_of_voters: event.target.value })\r\n  }\r\n  handle_reg_time_Change = (event) => {\r\n    this.setState({ reg_time: event.target.value })\r\n  }\r\n  handle_vote_time_Change = (event) => {\r\n    this.setState({ vote_time: event.target.value })\r\n  }\r\n  handle_reveal_time_Change = (event) => {\r\n    this.setState({ reveal_time: event.target.value })\r\n  }\r\n  render() {\r\n    const {submit_pressed,error} = this.state\r\n   \r\n    if(submit_pressed===0)\r\n    {\r\n      return (\r\n     \r\n        <div>\r\n          <h1>SET PAGE</h1>\r\n          <p>Your account: {this.state.account}</p>\r\n\r\n          <div className='container'>\r\n          {error===1 && <div><div class=\"alert alert-danger\" role=\"alert\">\r\n You have rejected the transaction. Please try again\r\n</div></div>}\r\n            <form>\r\n              <div class=\"container mb-3 flex\">\r\n                <label class=\"form-label\">Number of Candidates</label>\r\n                <input type=\"text\" class=\"form-control\" id=\"exampleTo\" value={this.state.no_of_voters}\r\n                  onChange={this.handle_no_of_voters_Change} />\r\n              </div>\r\n           \r\n              <button type=\"button\" class=\"btn btn-success\" onClick={() => this.set()}>Submit</button>\r\n            </form>\r\n          </div>\r\n          \r\n        </div>\r\n      );\r\n    }\r\n    else\r\n    {\r\n      return (\r\n     \r\n        <>\r\n        <Candidates_input  noOfVoters={this.state.no_of_voters} />\r\n        </>\r\n      );\r\n    }\r\n\r\n  }\r\n}\r\n\r\nexport default App;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}