{"ast":null,"code":"/*\r\nThis file is part of web3.js.\r\n\r\nweb3.js is free software: you can redistribute it and/or modify\r\nit under the terms of the GNU Lesser General Public License as published by\r\nthe Free Software Foundation, either version 3 of the License, or\r\n(at your option) any later version.\r\n\r\nweb3.js is distributed in the hope that it will be useful,\r\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\r\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\nGNU Lesser General Public License for more details.\r\n\r\nYou should have received a copy of the GNU Lesser General Public License\r\nalong with web3.js.  If not, see <http://www.gnu.org/licenses/>.\r\n*/\nimport { keccak256 } from 'ethereum-cryptography/keccak.js';\nimport { utf8ToBytes } from 'ethereum-cryptography/utils.js';\nimport { uint8ArrayToHexString } from '../utils.js';\nimport { isHexStrict } from './string.js';\n/**\r\n * Checks the checksum of a given address. Will also return false on non-checksum addresses.\r\n */\nexport const checkAddressCheckSum = data => {\n  if (!/^(0x)?[0-9a-f]{40}$/i.test(data)) return false;\n  const address = data.slice(2);\n  const updatedData = utf8ToBytes(address.toLowerCase());\n  const addressHash = uint8ArrayToHexString(keccak256(updatedData)).slice(2);\n  for (let i = 0; i < 40; i += 1) {\n    // the nth letter should be uppercase if the nth digit of casemap is 1\n    if (parseInt(addressHash[i], 16) > 7 && address[i].toUpperCase() !== address[i] || parseInt(addressHash[i], 16) <= 7 && address[i].toLowerCase() !== address[i]) {\n      return false;\n    }\n  }\n  return true;\n};\n/**\r\n * Checks if a given string is a valid Ethereum address. It will also check the checksum, if the address has upper and lowercase letters.\r\n */\nexport const isAddress = function (value) {\n  let checkChecksum = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  if (typeof value !== 'string' && !(value instanceof Uint8Array)) {\n    return false;\n  }\n  let valueToCheck;\n  if (value instanceof Uint8Array) {\n    valueToCheck = uint8ArrayToHexString(value);\n  } else if (typeof value === 'string' && !isHexStrict(value)) {\n    valueToCheck = value.toLowerCase().startsWith('0x') ? value : `0x${value}`;\n  } else {\n    valueToCheck = value;\n  }\n  // check if it has the basic requirements of an address\n  if (!/^(0x)?[0-9a-f]{40}$/i.test(valueToCheck)) {\n    return false;\n  }\n  // If it's ALL lowercase or ALL upppercase\n  if (/^(0x|0X)?[0-9a-f]{40}$/.test(valueToCheck) || /^(0x|0X)?[0-9A-F]{40}$/.test(valueToCheck)) {\n    return true;\n    // Otherwise check each case\n  }\n\n  return checkChecksum ? checkAddressCheckSum(valueToCheck) : true;\n};","map":{"version":3,"names":["keccak256","utf8ToBytes","uint8ArrayToHexString","isHexStrict","checkAddressCheckSum","data","test","address","slice","updatedData","toLowerCase","addressHash","i","parseInt","toUpperCase","isAddress","value","checkChecksum","arguments","length","undefined","Uint8Array","valueToCheck","startsWith"],"sources":["C:\\Users\\lakka\\OneDrive - Manipal Academy of Higher Education\\FIDUCIA\\voting-gui\\fiducia\\node_modules\\web3-validator\\src\\validation\\address.ts"],"sourcesContent":["ï»¿/*\r\nThis file is part of web3.js.\r\n\r\nweb3.js is free software: you can redistribute it and/or modify\r\nit under the terms of the GNU Lesser General Public License as published by\r\nthe Free Software Foundation, either version 3 of the License, or\r\n(at your option) any later version.\r\n\r\nweb3.js is distributed in the hope that it will be useful,\r\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\r\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\nGNU Lesser General Public License for more details.\r\n\r\nYou should have received a copy of the GNU Lesser General Public License\r\nalong with web3.js.  If not, see <http://www.gnu.org/licenses/>.\r\n*/\r\n\r\nimport { keccak256 } from 'ethereum-cryptography/keccak.js';\r\nimport { utf8ToBytes } from 'ethereum-cryptography/utils.js';\r\nimport { ValidInputTypes } from '../types.js';\r\nimport { uint8ArrayToHexString } from '../utils.js';\r\nimport { isHexStrict } from './string.js';\r\n\r\n/**\r\n * Checks the checksum of a given address. Will also return false on non-checksum addresses.\r\n */\r\nexport const checkAddressCheckSum = (data: string): boolean => {\r\n\tif (!/^(0x)?[0-9a-f]{40}$/i.test(data)) return false;\r\n\tconst address = data.slice(2);\r\n\tconst updatedData = utf8ToBytes(address.toLowerCase());\r\n\r\n\tconst addressHash = uint8ArrayToHexString(keccak256(updatedData)).slice(2);\r\n\r\n\tfor (let i = 0; i < 40; i += 1) {\r\n\t\t// the nth letter should be uppercase if the nth digit of casemap is 1\r\n\t\tif (\r\n\t\t\t(parseInt(addressHash[i], 16) > 7 && address[i].toUpperCase() !== address[i]) ||\r\n\t\t\t(parseInt(addressHash[i], 16) <= 7 && address[i].toLowerCase() !== address[i])\r\n\t\t) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\treturn true;\r\n};\r\n\r\n/**\r\n * Checks if a given string is a valid Ethereum address. It will also check the checksum, if the address has upper and lowercase letters.\r\n */\r\nexport const isAddress = (value: ValidInputTypes, checkChecksum = true) => {\r\n\tif (typeof value !== 'string' && !(value instanceof Uint8Array)) {\r\n\t\treturn false;\r\n\t}\r\n\r\n\tlet valueToCheck: string;\r\n\r\n\tif (value instanceof Uint8Array) {\r\n\t\tvalueToCheck = uint8ArrayToHexString(value);\r\n\t} else if (typeof value === 'string' && !isHexStrict(value)) {\r\n\t\tvalueToCheck = value.toLowerCase().startsWith('0x') ? value : `0x${value}`;\r\n\t} else {\r\n\t\tvalueToCheck = value;\r\n\t}\r\n\r\n\t// check if it has the basic requirements of an address\r\n\tif (!/^(0x)?[0-9a-f]{40}$/i.test(valueToCheck)) {\r\n\t\treturn false;\r\n\t}\r\n\t// If it's ALL lowercase or ALL upppercase\r\n\tif (\r\n\t\t/^(0x|0X)?[0-9a-f]{40}$/.test(valueToCheck) ||\r\n\t\t/^(0x|0X)?[0-9A-F]{40}$/.test(valueToCheck)\r\n\t) {\r\n\t\treturn true;\r\n\t\t// Otherwise check each case\r\n\t}\r\n\treturn checkChecksum ? checkAddressCheckSum(valueToCheck) : true;\r\n};\r\n"],"mappings":"AAAA;;;;;;;;;;;;;;;;AAiBA,SAASA,SAAS,QAAQ,iCAAiC;AAC3D,SAASC,WAAW,QAAQ,gCAAgC;AAE5D,SAASC,qBAAqB,QAAQ,aAAa;AACnD,SAASC,WAAW,QAAQ,aAAa;AAEzC;;;AAGA,OAAO,MAAMC,oBAAoB,GAAIC,IAAY,IAAa;EAC7D,IAAI,CAAC,sBAAsB,CAACC,IAAI,CAACD,IAAI,CAAC,EAAE,OAAO,KAAK;EACpD,MAAME,OAAO,GAAGF,IAAI,CAACG,KAAK,CAAC,CAAC,CAAC;EAC7B,MAAMC,WAAW,GAAGR,WAAW,CAACM,OAAO,CAACG,WAAW,EAAE,CAAC;EAEtD,MAAMC,WAAW,GAAGT,qBAAqB,CAACF,SAAS,CAACS,WAAW,CAAC,CAAC,CAACD,KAAK,CAAC,CAAC,CAAC;EAE1E,KAAK,IAAII,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,EAAE,EAAEA,CAAC,IAAI,CAAC,EAAE;IAC/B;IACA,IACEC,QAAQ,CAACF,WAAW,CAACC,CAAC,CAAC,EAAE,EAAE,CAAC,GAAG,CAAC,IAAIL,OAAO,CAACK,CAAC,CAAC,CAACE,WAAW,EAAE,KAAKP,OAAO,CAACK,CAAC,CAAC,IAC3EC,QAAQ,CAACF,WAAW,CAACC,CAAC,CAAC,EAAE,EAAE,CAAC,IAAI,CAAC,IAAIL,OAAO,CAACK,CAAC,CAAC,CAACF,WAAW,EAAE,KAAKH,OAAO,CAACK,CAAC,CAAE,EAC7E;MACD,OAAO,KAAK;;;EAGd,OAAO,IAAI;AACZ,CAAC;AAED;;;AAGA,OAAO,MAAMG,SAAS,GAAG,SAAAA,CAACC,KAAsB,EAA0B;EAAA,IAAxBC,aAAa,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,IAAI;EACrE,IAAI,OAAOF,KAAK,KAAK,QAAQ,IAAI,EAAEA,KAAK,YAAYK,UAAU,CAAC,EAAE;IAChE,OAAO,KAAK;;EAGb,IAAIC,YAAoB;EAExB,IAAIN,KAAK,YAAYK,UAAU,EAAE;IAChCC,YAAY,GAAGpB,qBAAqB,CAACc,KAAK,CAAC;GAC3C,MAAM,IAAI,OAAOA,KAAK,KAAK,QAAQ,IAAI,CAACb,WAAW,CAACa,KAAK,CAAC,EAAE;IAC5DM,YAAY,GAAGN,KAAK,CAACN,WAAW,EAAE,CAACa,UAAU,CAAC,IAAI,CAAC,GAAGP,KAAK,GAAG,KAAKA,KAAK,EAAE;GAC1E,MAAM;IACNM,YAAY,GAAGN,KAAK;;EAGrB;EACA,IAAI,CAAC,sBAAsB,CAACV,IAAI,CAACgB,YAAY,CAAC,EAAE;IAC/C,OAAO,KAAK;;EAEb;EACA,IACC,wBAAwB,CAAChB,IAAI,CAACgB,YAAY,CAAC,IAC3C,wBAAwB,CAAChB,IAAI,CAACgB,YAAY,CAAC,EAC1C;IACD,OAAO,IAAI;IACX;;;EAED,OAAOL,aAAa,GAAGb,oBAAoB,CAACkB,YAAY,CAAC,GAAG,IAAI;AACjE,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}