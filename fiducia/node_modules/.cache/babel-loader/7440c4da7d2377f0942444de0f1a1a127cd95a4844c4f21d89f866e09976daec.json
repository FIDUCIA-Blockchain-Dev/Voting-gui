{"ast":null,"code":"/*\r\nThis file is part of web3.js.\r\n\r\nweb3.js is free software: you can redistribute it and/or modify\r\nit under the terms of the GNU Lesser General Public License as published by\r\nthe Free Software Foundation, either version 3 of the License, or\r\n(at your option) any later version.\r\n\r\nweb3.js is distributed in the hope that it will be useful,\r\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\r\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\nGNU Lesser General Public License for more details.\r\n\r\nYou should have received a copy of the GNU Lesser General Public License\r\nalong with web3.js.  If not, see <http://www.gnu.org/licenses/>.\r\n*/\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nimport { ContractExecutionError, Eip838ExecutionError, InvalidResponseError } from 'web3-errors';\nimport { decodeContractErrorData, isAbiErrorFragment } from 'web3-eth-abi';\nimport { DEFAULT_RETURN_FORMAT } from 'web3-types';\n// eslint-disable-next-line import/no-cycle\nimport { call } from '../rpc_method_wrappers.js';\nexport const parseTransactionError = (error, contractAbi) => {\n  var _a, _b, _c, _d;\n  if (error instanceof ContractExecutionError && error.innerError instanceof Eip838ExecutionError) {\n    if (contractAbi !== undefined) {\n      const errorsAbi = contractAbi.filter(abi => isAbiErrorFragment(abi));\n      decodeContractErrorData(errorsAbi, error.innerError);\n      return {\n        reason: error.innerError.message,\n        signature: (_a = error.innerError.data) === null || _a === void 0 ? void 0 : _a.slice(0, 10),\n        data: (_b = error.innerError.data) === null || _b === void 0 ? void 0 : _b.substring(10),\n        customErrorName: error.innerError.errorName,\n        customErrorDecodedSignature: error.innerError.errorSignature,\n        customErrorArguments: error.innerError.errorArgs\n      };\n    }\n    return {\n      reason: error.innerError.message,\n      signature: (_c = error.innerError.data) === null || _c === void 0 ? void 0 : _c.slice(0, 10),\n      data: (_d = error.innerError.data) === null || _d === void 0 ? void 0 : _d.substring(10)\n    };\n  }\n  if (error instanceof InvalidResponseError && !Array.isArray(error.innerError) && error.innerError !== undefined) {\n    return error.innerError.message;\n  }\n  throw error;\n};\n/**\r\n *\tReturns the revert reason generated by the EVM if the transaction were to be executed.\r\n *\r\n * @param web3Context - ({@link Web3Context}) Web3 configuration object that contains things such as the provider, request manager, wallet, etc.\r\n * @param transaction - A transaction object where all properties are optional except `to`, however it's recommended to include the `from` property or it may default to `0x0000000000000000000000000000000000000000` depending on your node or provider.\r\n * @returns `undefined` if no revert reason was given, a revert reason object, a revert reason string, or an `unknown` error\r\n */\nexport function getRevertReason(web3Context, transaction, contractAbi) {\n  let returnFormat = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : DEFAULT_RETURN_FORMAT;\n  return __awaiter(this, void 0, void 0, function* () {\n    try {\n      yield call(web3Context, transaction, web3Context.defaultBlock, returnFormat);\n      return undefined;\n    } catch (error) {\n      return parseTransactionError(error, contractAbi);\n    }\n  });\n}","map":{"version":3,"names":["ContractExecutionError","Eip838ExecutionError","InvalidResponseError","decodeContractErrorData","isAbiErrorFragment","DEFAULT_RETURN_FORMAT","call","parseTransactionError","error","contractAbi","innerError","undefined","errorsAbi","filter","abi","reason","message","signature","_a","data","slice","_b","substring","customErrorName","errorName","customErrorDecodedSignature","errorSignature","customErrorArguments","errorArgs","_c","_d","Array","isArray","getRevertReason","web3Context","transaction","returnFormat","arguments","length","defaultBlock"],"sources":["C:\\Users\\lakka\\OneDrive - Manipal Academy of Higher Education\\FIDUCIA\\voting-gui\\fiducia\\node_modules\\web3-eth\\src\\utils\\get_revert_reason.ts"],"sourcesContent":["/*\r\nThis file is part of web3.js.\r\n\r\nweb3.js is free software: you can redistribute it and/or modify\r\nit under the terms of the GNU Lesser General Public License as published by\r\nthe Free Software Foundation, either version 3 of the License, or\r\n(at your option) any later version.\r\n\r\nweb3.js is distributed in the hope that it will be useful,\r\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\r\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\nGNU Lesser General Public License for more details.\r\n\r\nYou should have received a copy of the GNU Lesser General Public License\r\nalong with web3.js.  If not, see <http://www.gnu.org/licenses/>.\r\n*/\r\n\r\nimport { Web3Context } from 'web3-core';\r\nimport { ContractExecutionError, Eip838ExecutionError, InvalidResponseError } from 'web3-errors';\r\nimport { decodeContractErrorData, isAbiErrorFragment } from 'web3-eth-abi';\r\nimport {\r\n\tAbiErrorFragment,\r\n\tContractAbi,\r\n\tDataFormat,\r\n\tDEFAULT_RETURN_FORMAT,\r\n\tEthExecutionAPI,\r\n\tTransactionCall,\r\n} from 'web3-types';\r\n\r\n// eslint-disable-next-line import/no-cycle\r\nimport { call } from '../rpc_method_wrappers.js';\r\nimport { RevertReason, RevertReasonWithCustomError } from '../types.js';\r\n\r\nexport const parseTransactionError = (error: unknown, contractAbi?: ContractAbi) => {\r\n\tif (\r\n\t\terror instanceof ContractExecutionError &&\r\n\t\terror.innerError instanceof Eip838ExecutionError\r\n\t) {\r\n\t\tif (contractAbi !== undefined) {\r\n\t\t\tconst errorsAbi = contractAbi.filter(abi =>\r\n\t\t\t\tisAbiErrorFragment(abi),\r\n\t\t\t) as unknown as AbiErrorFragment[];\r\n\t\t\tdecodeContractErrorData(errorsAbi, error.innerError);\r\n\r\n\t\t\treturn {\r\n\t\t\t\treason: error.innerError.message,\r\n\t\t\t\tsignature: error.innerError.data?.slice(0, 10),\r\n\t\t\t\tdata: error.innerError.data?.substring(10),\r\n\t\t\t\tcustomErrorName: error.innerError.errorName,\r\n\t\t\t\tcustomErrorDecodedSignature: error.innerError.errorSignature,\r\n\t\t\t\tcustomErrorArguments: error.innerError.errorArgs,\r\n\t\t\t} as RevertReasonWithCustomError;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\treason: error.innerError.message,\r\n\t\t\tsignature: error.innerError.data?.slice(0, 10),\r\n\t\t\tdata: error.innerError.data?.substring(10),\r\n\t\t} as RevertReason;\r\n\t}\r\n\r\n\tif (\r\n\t\terror instanceof InvalidResponseError &&\r\n\t\t!Array.isArray(error.innerError) &&\r\n\t\terror.innerError !== undefined\r\n\t) {\r\n\t\treturn error.innerError.message;\r\n\t}\r\n\r\n\tthrow error;\r\n};\r\n\r\n/**\r\n *\tReturns the revert reason generated by the EVM if the transaction were to be executed.\r\n *\r\n * @param web3Context - ({@link Web3Context}) Web3 configuration object that contains things such as the provider, request manager, wallet, etc.\r\n * @param transaction - A transaction object where all properties are optional except `to`, however it's recommended to include the `from` property or it may default to `0x0000000000000000000000000000000000000000` depending on your node or provider.\r\n * @returns `undefined` if no revert reason was given, a revert reason object, a revert reason string, or an `unknown` error\r\n */\r\nexport async function getRevertReason<\r\n\tReturnFormat extends DataFormat = typeof DEFAULT_RETURN_FORMAT,\r\n>(\r\n\tweb3Context: Web3Context<EthExecutionAPI>,\r\n\ttransaction: TransactionCall,\r\n\tcontractAbi?: ContractAbi,\r\n\treturnFormat: ReturnFormat = DEFAULT_RETURN_FORMAT as ReturnFormat,\r\n): Promise<undefined | RevertReason | RevertReasonWithCustomError | string> {\r\n\ttry {\r\n\t\tawait call(web3Context, transaction, web3Context.defaultBlock, returnFormat);\r\n\t\treturn undefined;\r\n\t} catch (error) {\r\n\t\treturn parseTransactionError(error, contractAbi);\r\n\t}\r\n}\r\n"],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkBA,SAASA,sBAAsB,EAAEC,oBAAoB,EAAEC,oBAAoB,QAAQ,aAAa;AAChG,SAASC,uBAAuB,EAAEC,kBAAkB,QAAQ,cAAc;AAC1E,SAICC,qBAAqB,QAGf,YAAY;AAEnB;AACA,SAASC,IAAI,QAAQ,2BAA2B;AAGhD,OAAO,MAAMC,qBAAqB,GAAGA,CAACC,KAAc,EAAEC,WAAyB,KAAI;;EAClF,IACCD,KAAK,YAAYR,sBAAsB,IACvCQ,KAAK,CAACE,UAAU,YAAYT,oBAAoB,EAC/C;IACD,IAAIQ,WAAW,KAAKE,SAAS,EAAE;MAC9B,MAAMC,SAAS,GAAGH,WAAW,CAACI,MAAM,CAACC,GAAG,IACvCV,kBAAkB,CAACU,GAAG,CAAC,CACU;MAClCX,uBAAuB,CAACS,SAAS,EAAEJ,KAAK,CAACE,UAAU,CAAC;MAEpD,OAAO;QACNK,MAAM,EAAEP,KAAK,CAACE,UAAU,CAACM,OAAO;QAChCC,SAAS,EAAE,CAAAC,EAAA,GAAAV,KAAK,CAACE,UAAU,CAACS,IAAI,cAAAD,EAAA,uBAAAA,EAAA,CAAEE,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC;QAC9CD,IAAI,EAAE,CAAAE,EAAA,GAAAb,KAAK,CAACE,UAAU,CAACS,IAAI,cAAAE,EAAA,uBAAAA,EAAA,CAAEC,SAAS,CAAC,EAAE,CAAC;QAC1CC,eAAe,EAAEf,KAAK,CAACE,UAAU,CAACc,SAAS;QAC3CC,2BAA2B,EAAEjB,KAAK,CAACE,UAAU,CAACgB,cAAc;QAC5DC,oBAAoB,EAAEnB,KAAK,CAACE,UAAU,CAACkB;OACR;;IAGjC,OAAO;MACNb,MAAM,EAAEP,KAAK,CAACE,UAAU,CAACM,OAAO;MAChCC,SAAS,EAAE,CAAAY,EAAA,GAAArB,KAAK,CAACE,UAAU,CAACS,IAAI,cAAAU,EAAA,uBAAAA,EAAA,CAAET,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC;MAC9CD,IAAI,EAAE,CAAAW,EAAA,GAAAtB,KAAK,CAACE,UAAU,CAACS,IAAI,cAAAW,EAAA,uBAAAA,EAAA,CAAER,SAAS,CAAC,EAAE;KACzB;;EAGlB,IACCd,KAAK,YAAYN,oBAAoB,IACrC,CAAC6B,KAAK,CAACC,OAAO,CAACxB,KAAK,CAACE,UAAU,CAAC,IAChCF,KAAK,CAACE,UAAU,KAAKC,SAAS,EAC7B;IACD,OAAOH,KAAK,CAACE,UAAU,CAACM,OAAO;;EAGhC,MAAMR,KAAK;AACZ,CAAC;AAED;;;;;;;AAOA,OAAM,SAAgByB,eAAeA,CAGpCC,WAAyC,EACzCC,WAA4B,EAC5B1B,WAAyB,EACyC;EAAA,IAAlE2B,YAAA,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAA1B,SAAA,GAAA0B,SAAA,MAA6BhC,qBAAqC;;IAElE,IAAI;MACH,MAAMC,IAAI,CAAC4B,WAAW,EAAEC,WAAW,EAAED,WAAW,CAACK,YAAY,EAAEH,YAAY,CAAC;MAC5E,OAAOzB,SAAS;KAChB,CAAC,OAAOH,KAAK,EAAE;MACf,OAAOD,qBAAqB,CAACC,KAAK,EAAEC,WAAW,CAAC;;EAElD,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}